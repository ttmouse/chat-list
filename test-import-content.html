<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•å¯¼å…¥è¯æœ¯åŠŸèƒ½</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        .test-section h3 {
            margin-top: 0;
            color: #333;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.2s;
        }
        .btn-primary {
            background: #2196F3;
            color: white;
        }
        .btn-primary:hover {
            background: #1976D2;
        }
        .btn-success {
            background: #4CAF50;
            color: white;
        }
        .btn-success:hover {
            background: #45a049;
        }
        .test-data {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .widget-actions {
            display: flex;
            gap: 8px;
            margin: 15px 0;
        }
        .btn-add-script, .btn-import-script {
            flex: 1;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s;
        }
        .btn-add-script {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }
        .btn-import-script {
            background: linear-gradient(135deg, #2196F3, #1976D2);
            color: white;
        }
        .btn-add-script:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
        }
        .btn-import-script:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª å¯¼å…¥è¯æœ¯åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ğŸ“‹ åŠŸèƒ½è¯´æ˜</h3>
            <p>ç°åœ¨å·²ç»åœ¨"æ·»åŠ è¯æœ¯"æŒ‰é’®æ—è¾¹æ·»åŠ äº†"ğŸ“¥ å¯¼å…¥è¯æœ¯"æŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»è¯¥æŒ‰é’®æ¥å¯¼å…¥ä¹‹å‰å¯¼å‡ºçš„è¯æœ¯æ•°æ®ã€‚</p>
            
            <div class="widget-actions">
                <button class="btn-add-script">+ æ·»åŠ è¯æœ¯</button>
                <button class="btn-import-script">ğŸ“¥ å¯¼å…¥è¯æœ¯</button>
            </div>
            
            <p><strong>æ–°å¢åŠŸèƒ½ï¼š</strong></p>
            <ul>
                <li>åœ¨è¯æœ¯åˆ—è¡¨ç•Œé¢æ·»åŠ äº†"å¯¼å…¥è¯æœ¯"æŒ‰é’®</li>
                <li>æŒ‰é’®é‡‡ç”¨è“è‰²æ¸å˜è®¾è®¡ï¼Œä¸æ·»åŠ æŒ‰é’®å½¢æˆå¯¹æ¯”</li>
                <li>ç‚¹å‡»æŒ‰é’®ä¼šå¼¹å‡ºæ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†</li>
                <li>æ”¯æŒå¯¼å…¥JSONæ ¼å¼çš„è¯æœ¯æ•°æ®æ–‡ä»¶</li>
                <li>å¯¼å…¥å‰ä¼šæ˜¾ç¤ºç¡®è®¤æç¤ºï¼Œé¿å…è¯¯æ“ä½œ</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>ğŸ”§ ä¿®æ”¹å†…å®¹</h3>
            <p><strong>1. HTMLç»“æ„ä¿®æ”¹ (content.js)ï¼š</strong></p>
            <div class="test-data">åœ¨widget-actionså®¹å™¨ä¸­æ·»åŠ äº†å¯¼å…¥æŒ‰é’®ï¼š
&lt;button class="btn-import-script"&gt;ğŸ“¥ å¯¼å…¥è¯æœ¯&lt;/button&gt;</div>
            
            <p><strong>2. äº‹ä»¶ç»‘å®š (content.js)ï¼š</strong></p>
            <div class="test-data">// å¯¼å…¥è¯æœ¯
this.widget.querySelector('.btn-import-script').addEventListener('click', () => {
  try {
    console.log('ç‚¹å‡»å¯¼å…¥è¯æœ¯æŒ‰é’®');
    this.showImportDialog();
  } catch (error) {
    console.error('å¯¼å…¥è¯æœ¯æŒ‰é’®ç‚¹å‡»å¤„ç†å‡ºé”™:', error);
  }
});</div>
            
            <p><strong>3. CSSæ ·å¼ä¿®æ”¹ (content.css)ï¼š</strong></p>
            <div class="test-data">.widget-actions {
  display: flex;
  gap: 8px;
}

.btn-import-script {
  background: linear-gradient(135deg, #2196F3, #1976D2);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: all 0.2s;
  flex: 1;
}</div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“ æµ‹è¯•æ•°æ®ç”Ÿæˆ</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ç”Ÿæˆæµ‹è¯•ç”¨çš„JSONæ•°æ®æ–‡ä»¶ï¼š</p>
            <button class="btn btn-success" onclick="generateTestData()">ç”Ÿæˆæµ‹è¯•æ•°æ®æ–‡ä»¶</button>
            <div id="testDataResult"></div>
        </div>
        
        <div class="test-section">
            <h3>âœ… æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>é‡æ–°åŠ è½½æµè§ˆå™¨æ‰©å±•</li>
                <li>æ‰“å¼€ä»»æ„ç½‘é¡µï¼Œç¡®ä¿è¯æœ¯åŠ©æ‰‹å°éƒ¨ä»¶æ˜¾ç¤º</li>
                <li>æŸ¥çœ‹æ˜¯å¦æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼š"+ æ·»åŠ è¯æœ¯" å’Œ "ğŸ“¥ å¯¼å…¥è¯æœ¯"</li>
                <li>ç‚¹å‡»"ğŸ“¥ å¯¼å…¥è¯æœ¯"æŒ‰é’®</li>
                <li>é€‰æ‹©ä¸Šé¢ç”Ÿæˆçš„æµ‹è¯•JSONæ–‡ä»¶</li>
                <li>ç¡®è®¤å¯¼å…¥æ“ä½œ</li>
                <li>æ£€æŸ¥è¯æœ¯æ˜¯å¦æˆåŠŸå¯¼å…¥</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>ğŸ¯ é¢„æœŸç»“æœ</h3>
            <ul>
                <li>âœ… ç•Œé¢æ˜¾ç¤ºä¸¤ä¸ªæŒ‰é’®ï¼Œå¸ƒå±€ç¾è§‚</li>
                <li>âœ… ç‚¹å‡»å¯¼å…¥æŒ‰é’®å¼¹å‡ºæ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†</li>
                <li>âœ… é€‰æ‹©JSONæ–‡ä»¶åæ˜¾ç¤ºç¡®è®¤æç¤º</li>
                <li>âœ… ç¡®è®¤åæˆåŠŸå¯¼å…¥è¯æœ¯æ•°æ®</li>
                <li>âœ… å¯¼å…¥çš„è¯æœ¯åœ¨ç•Œé¢ä¸­æ­£ç¡®æ˜¾ç¤º</li>
            </ul>
        </div>
    </div>
    
    <script>
        function generateTestData() {
            const testData = {
                scripts: [
                    {
                        id: 'test_1',
                        title: 'æµ‹è¯•æ¬¢è¿è¯­',
                        content: 'æ‚¨å¥½ï¼æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„æœåŠ¡ï¼Œæœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ',
                        group: 'é—®å€™è¯­',
                        tags: ['æ¬¢è¿', 'é—®å€™'],
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 'test_2',
                        title: 'æµ‹è¯•äº§å“ä»‹ç»',
                        content: 'æˆ‘ä»¬çš„äº§å“å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼šé«˜è´¨é‡ã€é«˜æ€§ä»·æ¯”ã€ä¼˜è´¨æœåŠ¡ã€‚',
                        group: 'äº§å“ä»‹ç»',
                        tags: ['äº§å“', 'ä»‹ç»'],
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 'test_3',
                        title: 'æµ‹è¯•æ„Ÿè°¢è¯­',
                        content: 'æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼Œç¥æ‚¨ç”Ÿæ´»æ„‰å¿«ï¼',
                        group: 'ç»“æŸè¯­',
                        tags: ['æ„Ÿè°¢', 'ç»“æŸ'],
                        createdAt: new Date().toISOString()
                    }
                ],
                groups: ['é—®å€™è¯­', 'äº§å“ä»‹ç»', 'ç»“æŸè¯­'],
                exportTime: new Date().toISOString(),
                version: '1.0'
            };
            
            const dataStr = JSON.stringify(testData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'test-scripts-data.json';
            a.click();
            
            URL.revokeObjectURL(url);
            
            document.getElementById('testDataResult').innerHTML = `
                <div class="status success">
                    âœ… æµ‹è¯•æ•°æ®æ–‡ä»¶å·²ç”Ÿæˆå¹¶ä¸‹è½½ï¼štest-scripts-data.json<br>
                    åŒ…å« 3 ä¸ªæµ‹è¯•è¯æœ¯å’Œ 3 ä¸ªåˆ†ç»„
                </div>
            `;
        }
    </script>
</body>
</html>